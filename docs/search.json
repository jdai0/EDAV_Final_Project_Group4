[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "EDAV Group 4: Shadows in the City – Analyzing NYPD Arrest Data to Illuminate Crime Patterns in NYC",
    "section": "",
    "text": "1 Introduction\nOn November 8th, a man opened fire on an NYC subway, shooting the victim in the legs. The incident happened on the Upper West, not far from where we lived. Just 10 days later, three people were killed in random stabbing spree. The murderer, covered in blood, walked freely in the bustling streets in Manhattan before being arrested.\nWe live in a city that riffles with opportunities and danger at the same time. As data science students in NYC, both our own safety and the community we share are deeply intertwined with issues of public safety. In this project, we attempt to conduct an Exploratory Data Analysis (EDA) on crimes in NYC as our means to raise awareness and contribute to the community.\nWe identified NYPD Arrest Data as our main data source, which includes information such as the type of crime, location, time, and suspect demographics. Although many crimes are deep-rooted, requiring massive investment and sacrifices to address, EDA could still yield valuable insight. By exploring social-economic correlations behind crimes, EDA could serve as a fundamental step for interventions and policy changes."
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.1 Description",
    "text": "2.1 Description\nFor this project, the dataset we used is NYPD_Arrest_Data_Year_to_Date_.csv, which provides detailed records of arrests made by the New York City Police Department (NYPD) within the current year, specifically from 2024/01/01 to 2024/09/30. Each record includes information such as the type of crime, location, time, and suspect demographics, offering an opportunity to analyze trends in police enforcement activity.\n\nData Collection and Updates:\n\nOriginally collected and maintained by the NYPD, extracted and reviewed by the Office of Management Analysis and Planning (OMAP), the primary evaluation and assessment arm and “think tank” of NYPD.\nUpdated quarterly.\n\nFormat and Dimensions:\n\nThe dataset is in CSV format.\nIt includes fields such as the arrest date, type and level of crime, location coordinates, and demographic details (e.g., age, race, sex).\n\nIssues/Problems:\n\nMissing values in certain fields due to historical changes in data collection forms or unavailable information at the time of reporting.\nGeo location data may not be accurate: data on certain arrests (e.g., those on moving trains or in parks) is approximated to nearby coordinates, and those arrests who were not able to be geo-coded have been located as occurring at the police station house within the precinct of occurrence.\nSome arrests do not have a specific law codes due to the huge amount of laws, so some records are categorized under generic or broad law codes (e.g., “LOC00000UM”).\nTranscription errors may result in inconsistencies in nominal data.\n\nData Import & Source:\n\nThe data was collected from NYPD Arrest Data (Year to Date) on Data.Gov (https://catalog.data.gov/dataset/nypd-arrest-data-year-to-date), which is a national open data platform that provides access to datasets published by agencies across the government.\nAs mentioned before, the dataset was actually rearranged and extracted from the original data & report from NYPD, but the original data is not publicly available by NYPD.\nConsidering that the data source Data.Gov is an official government data website, we have reason to believe in the authenticity and accuracy of the data."
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\nWe first take a look at what does the data look like and its structure:\n\n\nWe found that the raw dataset contains 195447 obs (rows) of 19 variables (cols), with more detailed variable information provided in the source website:\n\n\nARREST_KEY: Randomly generated persistent ID for each arrest\nARREST_DATE: Exact date of arrest for the reported event\nPD_CD: Three digit internal classification code (more granular than Key Code)\nPD_DESC: Description of internal classification corresponding with PD code (more granular than Offense Description)\nKY_CD: Three digit internal classification code (more general category than PD code)\nOFNS_DESC: Description of internal classification corresponding with KY code (more general category than PD description)\nLAW_CODE: Law code charges corresponding to the NYS Penal Law, VTL and other various local laws\nLAW_CAT_CD: Level of offense: felony, misdemeanor, violation\nARREST_BORO: Borough of arrest. B(Bronx), S(Staten Island), K(Brooklyn), M(Manhattan), Q(Queens)\nARREST_PRECINCT: Precinct where the arrest occurred\nJURISDICTION_CODE: Jurisdiction responsible for arrest. Jurisdiction codes 0(Patrol), 1(Transit) and 2(Housing) represent NYPD whilst codes 3 and more represent non NYPD jurisdictions\nAGE_GROUP: Perpetrator’s age within a category\nPERP_SEX: Perpetrator’s sex description\nPERP_RACE: Perpetrator’s race description\nX_COORD_CD: Midblock X-coordinate for New York State Plane Coordinate System, Long Island Zone, NAD 83, units feet (FIPS 3104)\nY_COORD_CD: Midblock Y-coordinate for New York State Plane Coordinate System, Long Island Zone, NAD 83, units feet (FIPS 3104)\nLatitude: Latitude coordinate for Global Coordinate System, WGS 1984, decimal degrees (EPSG 4326)\nLongitude: Longitude coordinate for Global Coordinate System, WGS 1984, decimal degrees (EPSG 4326)\nNew.Georeferenced.Column: Point coordinate in the form of (Longitude, Latitude)\n\n\nNow we investigate missing values:\n\n\n\nCode\nprint(missing_table)\n\n\n  Variable Missing_Count\n1    KY_CD            26\n2    PD_CD             6\n\n\n\nWe can see that most columns do not contain missing values, except for KY_CD and PD_CD, both of which are 3 digit internal classification code to categorize the type of the arrest, but the missing values only count for a tiny portion of the whole dataset.\nWe can then visualize the missing values using several graphs for clarity:\n\n\n\nCode\n# Filter for variables with missing values only\nmissing_summary_df$Missing_Proportion &lt;- missing_summary_df$Missing_Count / nrow(raw_data)\n\nmissing_summary_filtered &lt;- missing_summary_df |&gt;\n  filter(Missing_Proportion &gt; 0)\n\n# Horizontal bar plot for variables with missing values\nggplot(missing_summary_filtered, aes(x = reorder(Variable, -Missing_Proportion), y = Missing_Proportion)) +\n  geom_bar(stat = \"identity\", fill = \"darkorange\") +\n  coord_flip() +\n  labs(title = \"Proportion of Missing Values (Filtered)\", \n       x = \"Variable\", y = \"Proportion of Missing Values\")+\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\nThis plot shows the proportion of missing values for variables that have missing data (PD_CD and KY_CD), highlighting that KY_CD has a slightly higher proportion of missing values compared to PD_CD, but both of which are extremely low overall.\n\n\n\nCode\n# use gg_miss_upset for UpSet graph\ngg_miss_upset(raw_data)\n\n\n\n\n\n\nThis UpSet Plot shows the intersection of missing values among the variables KY_CD and PD_CD: 6 records have missing values in both KY_CD and PD_CD; and KY_CD has 20 extra missing values in total.\nWe can also go further to investigate underlying pattern of missing values using other variables, e.g.: geographic location & demographic information.\n\n\n\nCode\nggplot(missing_by_boro, aes(x = ARREST_BORO, y = Missing_Rate)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Missing Rate by Borough\", x = \"Borough\", y = \"Missing Rate\")+\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\nCode\nggplot(missing_by_demo, aes(x = AGE_GROUP, y = Missing_Rate, fill = PERP_SEX)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Missing Rate by Age and Sex\", x = \"Age Group\", y = \"Missing Rate\")+\n  theme(plot.title = element_text(hjust = 0.5))"
  },
  {
    "objectID": "data.html#data-cleaning",
    "href": "data.html#data-cleaning",
    "title": "2  Data",
    "section": "2.3 Data Cleaning",
    "text": "2.3 Data Cleaning\n\nThere seems to be some slight pattern underlying the missing values, especially when we consider the the age variable, but as we mentioned in section 2.1, these missing values may due to historical changes in data collection forms or unavailable information at the time of reporting. Also, considering the extremely small percentage of missing values, we choose to directly delete all rows with missing values.\n\n\n\nCode\n# Remove all rows with missing values\ndata &lt;- na.omit(raw_data)\n\n# Check the number of rows before and after removing missing values\ncat(\"Number of rows before cleaning:\", nrow(raw_data), \"\\n\")\n\n\nNumber of rows before cleaning: 195447 \n\n\nCode\ncat(\"Number of rows after removing missing values:\", nrow(data), \"\\n\")\n\n\nNumber of rows after removing missing values: 195421 \n\n\nCode\n# Verify the data no longer contains missing values\ncat(\"Number of missing values:\", sum(is.na(data)), \"\\n\")\n\n\nNumber of missing values: 0 \n\n\n\nFor further analysis and visualization purpose, there are some variables that we can remove from the dataset and will not cause any inconvenience. Here are the reasons:\n\n\nARREST_KEY\nThis is a randomly generated unique identifier for each record. It does not carry any analytical or statistical value and is irrelevant for data analysis or visualization.\nY_COORD_CD & X_COORD_CD\nThese variables represent geographic coordinates in the NAD 1983 system. Since the dataset already includes Latitude and Longitude (which are more universally understood and used), these fields are redundant and were removed.\nLAW_CODE\nThis variable contains detailed law codes, which have too many categories (1044 as seen from above) to be useful for most visualizations or analyses. Instead, the LAW_CAT_CD variable, which provides broader categories (felony, misdemeanor, violation), is more practical and will be used.\n\n\n\nCode\n# Remove unnecessary variables\ndata_cleaned &lt;- data |&gt;\n  select(-ARREST_KEY, -Y_COORD_CD, -X_COORD_CD, -LAW_CODE)\n\n\nWe then remove these variables:\n\n\nCode\ncat(\"Now there are:\", nrow(data_cleaned), \"rows and \", ncol(data_cleaned), \"columns. \\n\")\n\n\nNow there are: 195421 rows and  15 columns."
  },
  {
    "objectID": "results.html#what-are-the-most-common-types-of-arrests-in-nyc",
    "href": "results.html#what-are-the-most-common-types-of-arrests-in-nyc",
    "title": "3  Results",
    "section": "3.1 What are the most common types of arrests in NYC?",
    "text": "3.1 What are the most common types of arrests in NYC?\n\n\nCode\nggplot(data, aes(x = fct_rev(fct_infreq(OFNS_DESC)), fill = ..count..)) +\n  geom_bar(color = \"black\") +\n  coord_flip() +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +\n  labs(\n    title = \"Arrest Types Distribution in NYC\",\n    x = \"Offense Type\",\n    y = \"Number of Arrests\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.y = element_text(size = 5, angle = 15, hjust = 1),\n    plot.title = element_text(size = 13, hjust = 0.5, face = \"bold\")\n  )\n\n\nWarning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\nℹ Please use `after_stat(count)` instead.\n\n\n\n\n\nThe graph reveals that the most common arrest type in NYC is “Assault 3 & Related Offenses” (intentional or reckless infliction of physical injury to others), significantly outpacing other categories and reflecting the prevalence of physical altercations in NYC’s dynamic environment. Following closely are “Petit Larceny,” “Felony Assault,” and “Dangerous Drugs,” showcasing the focus on theft, violent crimes, and drug-related offenses. These categories underline both the economic pressures and social challenges in the city. Meanwhile, the steep drop-off after these top offenses suggests that law enforcement resources are primarily concentrated on addressing these recurring issues.\nInterestingly, offenses like “Fortune Telling” and “Parking Offenses” appear at the bottom, reminding us that arrests span from the mundane to the severe in this bustling metropolis."
  },
  {
    "objectID": "results.html#where-are-arrests-concentrated-in-nyc",
    "href": "results.html#where-are-arrests-concentrated-in-nyc",
    "title": "3  Results",
    "section": "3.2 Where are arrests concentrated in NYC?",
    "text": "3.2 Where are arrests concentrated in NYC?\n\n\nCode\nggplot(data_geo, aes(x = Longitude, y = Latitude)) +\n  stat_density2d(aes(fill = ..density..), geom = \"raster\", contour = FALSE) +\n  scale_fill_gradient(low = \"lightyellow\", high = \"darkred\", name = \"Density\") +\n  labs(\n    title = \"Arrest Density by Borough\",\n    x = \"Longitude\",\n    y = \"Latitude\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 13, hjust = 0.5, face = \"bold\"),\n    axis.text = element_text(size = 10)\n  ) +\n  facet_wrap(~ ARREST_BORO)\n\n\n\n\n\n\n\nCode\nggplot(data_geo, aes(x = Longitude, y = Latitude)) +\n  stat_density2d(aes(fill = ..density..), geom = \"raster\", contour = FALSE, alpha = 0.8) +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkred\", name = \"Density\") +\n  labs(\n    title = \"Geographical Concentration of Arrests in NYC\",\n    x = \"Longitude\",\n    y = \"Latitude\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 13, hjust = 0.5, face = \"bold\"),\n    axis.text = element_text(size = 10)\n  )\n\n\n\n\n\n\n\nCode\nggplot(data_geo, aes(x = Longitude, y = Latitude)) +\n  geom_point(alpha = 0.1, color = \"blue\", size = 0.5) +\n  labs(\n    title = \"Raw Arrest Locations in NYC\",\n    x = \"Longitude\",\n    y = \"Latitude\"\n  ) +\n  theme_minimal()+\n  theme(\n    plot.title = element_text(size = 13, hjust = 0.5, face = \"bold\"),\n  )\n\n\n\n\n\n\n\nCode\ndata_geo &lt;- data_geo %&gt;%\n  group_by(Longitude, Latitude) %&gt;%\n  summarise(Offense_Count = n()) %&gt;%\n  ungroup()\n\n\n`summarise()` has grouped output by 'Longitude'. You can override using the\n`.groups` argument.\n\n\nCode\ndata_geo &lt;- data_geo %&gt;%\n   mutate(Transformed_Count = log1p(Offense_Count))\n\n\n\n\nCode\nleaflet(data_geo) %&gt;%\n  addTiles() %&gt;%\n  setView(lng = -73.95, lat = 40.7, zoom = 10) %&gt;%\n  addHeatmap(\n    lng = ~Longitude,\n    lat = ~Latitude,\n    intensity = ~Offense_Count,\n    blur = 15,\n    max = 0.1,\n    radius = 15,\n    minOpacity = 0.05,\n    gradient = c(\"0.0\" = \"blue\", \"0.3\" = \"skyblue\", \"0.5\" = \"lightyellow\", \"0.7\" = \"yellow\", \"0.9\" = \"orange\", \"1\" = \"red\")\n  )%&gt;%\n  addLabelOnlyMarkers(lng = -74.0, lat = 40.7, label = \"NYC Arrest Density\", labelOptions = labelOptions(noHide = TRUE))\n\n\n\n\n\n\nThe static & interactive heatmap vividly highlights the geographical concentration of arrests in NYC, with dense clusters in Manhattan and parts of Brooklyn and Queens. These hotspots likely align with areas of high population density, transportation hubs, and bustling commercial zones. Notably, regions like downtown Manhattan emerge as clear epicenters of criminal activity, potentially influenced by both a higher crime rate and concentrated law enforcement efforts. The absence of cooler blue gradients suggests that arrests are not uniformly distributed but are heavily localized, reflecting systemic or environmental factors driving these patterns."
  },
  {
    "objectID": "results.html#what-is-the-demographic-profile-of-suspects",
    "href": "results.html#what-is-the-demographic-profile-of-suspects",
    "title": "3  Results",
    "section": "3.3 What is the demographic profile of suspects?",
    "text": "3.3 What is the demographic profile of suspects?\n\n\nCode\n# Plot gender and race distribution\nggplot(data, aes(x = PERP_RACE, fill = PERP_SEX)) +\n  geom_bar(position = \"dodge\") +\n  labs(\n    title = \"Demographic Profile of Suspects in NYC\",\n    x = \"Race\",\n    y = \"Number of Arrests\",\n    fill = \"Gender\"\n  ) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\nThe grouped bar chart compares the racial and gender distribution of suspects. [Insert observations, e.g., “Males account for a larger proportion of arrests across all races.”]"
  },
  {
    "objectID": "results.html#how-do-arrests-vary-by-time-of-year",
    "href": "results.html#how-do-arrests-vary-by-time-of-year",
    "title": "3  Results",
    "section": "3.4 How do arrests vary by time of year?",
    "text": "3.4 How do arrests vary by time of year?\n\n\nCode\n# Convert ARREST_DATE to date format and extract month\ndata$ARREST_DATE &lt;- as.Date(data$ARREST_DATE, format = \"%m/%d/%Y\")\ndata$Month &lt;- month(data$ARREST_DATE, label = TRUE)\n\n# Plot monthly trend\nggplot(data, aes(x = Month)) +\n  geom_bar(fill = \"darkorange\") +\n  labs(\n    title = \"Monthly Variation in Arrests\",\n    x = \"Month\",\n    y = \"Number of Arrests\"\n  ) +\n  theme_minimal()\n\n\n\n\n\nThe bar chart reveals seasonal patterns in arrests, with peaks observed in [specific months]. This information is valuable for planning law enforcement resources."
  },
  {
    "objectID": "results.html#what-are-the-relationships-between-precincts-and-offense-types",
    "href": "results.html#what-are-the-relationships-between-precincts-and-offense-types",
    "title": "3  Results",
    "section": "3.5 What are the relationships between precincts and offense types?",
    "text": "3.5 What are the relationships between precincts and offense types?\n\n\nCode\n# Create a heatmap for precincts and offense types\n\n# Aggregate data\nprecinct_offense &lt;- data %&gt;%\n  count(ARREST_PRECINCT, OFNS_DESC) %&gt;%\n  spread(key = OFNS_DESC, value = n, fill = 0)\n\n# Convert to matrix and plot heatmap\nheatmap_data &lt;- as.matrix(precinct_offense[, -1])\nrownames(heatmap_data) &lt;- precinct_offense$ARREST_PRECINCT\n\nheatmap(heatmap_data, scale = \"row\", Colv = NA, Rowv = NA,\n        col = colorRampPalette(c(\"white\", \"red\"))(100),\n        main = \"Heatmap of Precincts and Offense Types\")\n\n\n\n\n\nThe heatmap shows precinct-level variations in arrests by offense type. Certain precincts are more associated with specific crimes, reflecting local enforcement needs or crime trends."
  }
]